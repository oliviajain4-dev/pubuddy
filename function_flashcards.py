# =========================================================
# ğŸ“¦ [í”„ë¡œì íŠ¸ ì •ë³´ - ê³ ì • ì˜ì—­]
# ---------------------------------------------------------
# í”„ë¡œì íŠ¸ëª… : PyBuddy (íŒŒì´ì¬ ì§€ì‹ ë„ê°)
# ê°œë°œì     : oliviajain4
# ì´ë©”ì¼     : oliviajain4@gmail.com
# ì›ê²© ì €ì¥ì†Œ: https://github.com/oliviajain4/pybuddy.git
# =========================================================

# =========================================================
# âš™ï¸ [1ï¸âƒ£ Streamlit ì„¤ì • - ê³ ì • êµ¬ê°„]
# =========================================================
import streamlit as st

st.set_page_config(
    page_title="PyBuddy - íŒŒì´ì¬ ë„ê°",
    page_icon="ğŸ",
    layout="centered"
)

if "saved_cards" not in st.session_state:
    st.session_state.saved_cards = []

# =========================================================
# ğŸ§  [2ï¸âƒ£ ê¸°ë³¸ ë°ì´í„° êµ¬ê°„ - í•™ìŠµ ì¹´ë“œ]
# =========================================================
python_knowledge = {
    "print": {
        "type": "ê¸°ë³¸ í•¨ìˆ˜",
        "importance": 5,
        "desc": "ì½˜ì†”(í„°ë¯¸ë„)ì— ë°ì´í„°ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.",
        "example": "print('Hello, world!')",
        "usage": "ê°€ì¥ ê¸°ë³¸ì ì¸ ì¶œë ¥ í•¨ìˆ˜ì…ë‹ˆë‹¤. ë””ë²„ê¹…(ì½”ë“œ í™•ì¸)ìš©ìœ¼ë¡œë„ ìì£¼ ì‚¬ìš©í•©ë‹ˆë‹¤.",
        "related": ["input", "len", "type"]
    },
    "len": {
        "type": "ê¸°ë³¸ í•¨ìˆ˜",
        "importance": 5,
        "desc": "ê°ì²´(ë¬¸ìì—´, ë¦¬ìŠ¤íŠ¸ ë“±)ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.",
        "example": "len('hello')  # 5",
        "usage": "ë¬¸ìì—´, ë¦¬ìŠ¤íŠ¸, ë”•ì…”ë„ˆë¦¬ì˜ ê¸¸ì´ë¥¼ êµ¬í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.",
        "related": ["count", "sum"]
    },
    "append": {
        "type": "ë¦¬ìŠ¤íŠ¸ ë©”ì„œë“œ",
        "importance": 5,
        "desc": "ë¦¬ìŠ¤íŠ¸ ëì— ìƒˆ ìš”ì†Œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.",
        "example": "my_list = [1, 2]\nmy_list.append(3)\nprint(my_list)  # [1, 2, 3]",
        "usage": "ë¦¬ìŠ¤íŠ¸ì— ë°ì´í„°ë¥¼ ëˆ„ì í•˜ê±°ë‚˜, ë°˜ë³µë¬¸ì—ì„œ í•˜ë‚˜ì”© ì¶”ê°€í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.",
        "related": ["list", "extend", "insert"]
    },
    "remove": {
        "type": "ë¦¬ìŠ¤íŠ¸ ë©”ì„œë“œ",
        "importance": 4,
        "desc": "ë¦¬ìŠ¤íŠ¸ì—ì„œ ì²« ë²ˆì§¸ë¡œ ì¼ì¹˜í•˜ëŠ” ìš”ì†Œë¥¼ ì œê±°í•©ë‹ˆë‹¤.",
        "example": "my_list = [1, 2, 3, 2]\nmy_list.remove(2)\nprint(my_list)  # [1, 3, 2]",
        "usage": "ë¦¬ìŠ¤íŠ¸ ì•ˆì—ì„œ íŠ¹ì • ê°’ì´ ì¡´ì¬í•  ë•Œë§Œ ì œê±°ë©ë‹ˆë‹¤. ê°’ì´ ì—†ìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒ!",
        "related": ["pop", "del"]
    },
    "if": {
        "type": "ì œì–´ë¬¸ (Control Flow)",
        "importance": 5,
        "desc": "ì¡°ê±´ì— ë”°ë¼ ì½”ë“œ ì‹¤í–‰ íë¦„ì„ ì œì–´í•©ë‹ˆë‹¤.",
        "example": "if score >= 60:\n    print('í•©ê²©')\nelse:\n    print('ë¶ˆí•©ê²©')",
        "usage": "ì¡°ê±´ íŒë‹¨, ë¶„ê¸° ì²˜ë¦¬ë¥¼ í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.",
        "related": ["for", "while"]
    }
}

# =========================================================
# ğŸ§© [3ï¸âƒ£ ë¡œì§ í•¨ìˆ˜ êµ¬ê°„]
# =========================================================
def show_card(query: str):
    """ì…ë ¥í•œ ë‹¨ì–´ì˜ ì¹´ë“œ ì •ë³´ í‘œì‹œ"""
    data = python_knowledge.get(query.lower())
    if not data:
        st.warning("ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì€ ê°œë…ì´ì—ìš” ğŸ˜…")
        return

    st.markdown(f"### ğŸ“˜ {query}()")
    st.markdown(f"**ğŸ“‚ ë¶„ë¥˜:** {data['type']}")
    st.markdown(f"**â­ ì¤‘ìš”ë„:** {'â˜…' * data['importance']}")
    st.markdown(f"**ğŸ“– ì„¤ëª…:** {data['desc']}")
    st.code(data['example'], language="python")
    st.markdown(f"**ğŸª„ ì‚¬ìš©ë°©ë²•:** {data['usage']}")
    st.markdown(f"**ğŸ”— ê´€ë ¨ ê°œë…:** {', '.join(data['related'])}")

    # ì €ì¥ ë²„íŠ¼
    if st.button("ğŸ’¾ ì´ ì¹´ë“œ ì €ì¥í•˜ê¸°", key=query):
        if query not in st.session_state.saved_cards:
            st.session_state.saved_cards.append(query)
            st.success(f"'{query}'ë¥¼ ë‚´ ë³´ê´€í•¨ì— ì €ì¥í–ˆì–´ìš”! ğŸ‰")
        else:
            st.info("ì´ë¯¸ ì €ì¥ëœ ì¹´ë“œì˜ˆìš” ğŸ˜Š")

# =========================================================
# ğŸ¨ [4ï¸âƒ£ ì¶œë ¥/UI êµ¬ê°„ - ìˆ˜ì • ììœ ]
# =========================================================
st.title("ğŸ PyHelper â€” íŒŒì´ì¬ ì§€ì‹ ë„ê°")
st.caption("ê¸°ì´ˆë¶€í„° ì°¨ê·¼ì°¨ê·¼, ë‚´ê°€ ì§ì ‘ ì •ë¦¬í•˜ëŠ” íŒŒì´ì¬ í•™ìŠµ ì±—ë´‡ ğŸ“˜")

query = st.text_input("ì°¾ê³  ì‹¶ì€ íŒŒì´ì¬ í•¨ìˆ˜ë‚˜ ê°œë…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: append, if, len):")

if query:
    show_card(query)

with st.sidebar:
    st.header("ğŸ“‚ ë‚´ ë³´ê´€í•¨")
    if st.session_state.saved_cards:
        for saved in st.session_state.saved_cards:
            st.write(f"- {saved}")
    else:
        st.caption("ì•„ì§ ì €ì¥ëœ ì¹´ë“œê°€ ì—†ì–´ìš” ğŸ’¡")

    st.markdown("---")
    st.info("ë‹¤ìŒ ëª©í‘œ: ğŸƒ ì•”ê¸° ì¹´ë“œ(ì•/ë’¤ ë³´ê¸°) ëª¨ë“œ ì¶”ê°€ ì˜ˆì •!")

